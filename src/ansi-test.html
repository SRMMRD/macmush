<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ANSI Parser Test</title>
  <style>
    body {
      background: #0d0d0d;
      color: #e5e5e5;
      font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
      padding: 2rem;
      line-height: 1.6;
    }
    h1 {
      color: #4a9eff;
    }
    .test-output {
      background: #1a1a1a;
      padding: 1rem;
      border-radius: 4px;
      margin: 1rem 0;
    }
    .test-line {
      white-space: pre-wrap;
      margin: 0.5rem 0;
    }
    @keyframes blink {
      0%, 49% { opacity: 1; }
      50%, 100% { opacity: 0; }
    }
  </style>
</head>
<body>
  <h1>ANSI Color Parser Test</h1>
  <p>Testing ANSI escape code parsing and rendering:</p>

  <div class="test-output" id="output"></div>

  <script type="module">
    import { parseAnsi, styleToCSS } from './ansi-parser.js';

    const output = document.getElementById('output');

    // Test cases
    const tests = [
      // Basic colors
      '\x1b[31mRed text\x1b[0m',
      '\x1b[32mGreen text\x1b[0m',
      '\x1b[33mYellow text\x1b[0m',
      '\x1b[34mBlue text\x1b[0m',
      '\x1b[35mMagenta text\x1b[0m',
      '\x1b[36mCyan text\x1b[0m',

      // Bright colors
      '\x1b[91mBright red\x1b[0m',
      '\x1b[92mBright green\x1b[0m',
      '\x1b[93mBright yellow\x1b[0m',

      // Background colors
      '\x1b[41;37mWhite on red\x1b[0m',
      '\x1b[44;33mYellow on blue\x1b[0m',

      // Text attributes
      '\x1b[1mBold text\x1b[0m',
      '\x1b[3mItalic text\x1b[0m',
      '\x1b[4mUnderlined text\x1b[0m',
      '\x1b[9mStrikethrough text\x1b[0m',
      '\x1b[5mBlinking text\x1b[0m',

      // Combined styles
      '\x1b[1;31;44mBold red on blue\x1b[0m',
      '\x1b[4;32mUnderlined green\x1b[0m',

      // Multiple colors in one line
      '\x1b[31mRed\x1b[0m and \x1b[32mGreen\x1b[0m and \x1b[34mBlue\x1b[0m',

      // Real MUD-like output
      'You see \x1b[33ma golden sword\x1b[0m lying on the ground.',
      '\x1b[1;31mThe dragon\x1b[0m breathes \x1b[91mfire\x1b[0m at you!',
      '\x1b[32mYou gained 100 experience points.\x1b[0m',
    ];

    tests.forEach(test => {
      const line = document.createElement('div');
      line.className = 'test-line';

      const segments = parseAnsi(test);
      segments.forEach(segment => {
        if (segment.text) {
          const span = document.createElement('span');
          span.textContent = segment.text;

          const css = styleToCSS(segment.style);
          Object.assign(span.style, css);

          line.appendChild(span);
        }
      });

      output.appendChild(line);
    });
  </script>
</body>
</html>
